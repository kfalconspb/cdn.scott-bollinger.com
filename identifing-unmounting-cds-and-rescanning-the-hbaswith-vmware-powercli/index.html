<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <title>Identifing, Unmounting CDs, and Rescanning the HBAs
with VMware PowerCLI</title>
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" type="text/css" href="/assets/main/css/main.css?v=12769605f4" />
    <noscript><link rel="stylesheet" href="/assets/main/css/noscript.css?v=12769605f4" /></noscript>

    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="canonical" href="https://scott-bollinger.com/identifing-unmounting-cds-and-rescanning-the-hbaswith-vmware-powercli/" />
    <meta name="referrer" content="no-referrer-when-downgrade" />
    <link rel="amphtml" href="https://scott-bollinger.com/identifing-unmounting-cds-and-rescanning-the-hbaswith-vmware-powercli/amp/" />
    
    <meta property="og:site_name" content="Scott-Bollinger.com" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Identifing, Unmounting CDs, and Rescanning the HBAs
with VMware PowerCLI" />
    <meta property="og:description" content="VMotion Failing?These VMware PowerCLI commands, came in handy a month or so ago. I&#x27;d thought I&#x27;d share. Credit is given in the links below. What do you do when, you see a mounted ISO not being used? Left abandoned and discarded? Does it drive you absolutely mad? Do you" />
    <meta property="og:url" content="https://scott-bollinger.com/identifing-unmounting-cds-and-rescanning-the-hbaswith-vmware-powercli/" />
    <meta property="og:image" content="https://scott-bollinger.com/content/images/2019/10/IMG_5553.jpg" />
    <meta property="article:published_time" content="2014-02-09T17:00:00.000Z" />
    <meta property="article:modified_time" content="2019-10-21T09:29:46.000Z" />
    <meta property="article:tag" content="Virtualization" />
    
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Identifing, Unmounting CDs, and Rescanning the HBAs
with VMware PowerCLI" />
    <meta name="twitter:description" content="VMotion Failing?These VMware PowerCLI commands, came in handy a month or so ago. I&#x27;d thought I&#x27;d share. Credit is given in the links below. What do you do when, you see a mounted ISO not being used? Left abandoned and discarded? Does it drive you absolutely mad? Do you" />
    <meta name="twitter:url" content="https://scott-bollinger.com/identifing-unmounting-cds-and-rescanning-the-hbaswith-vmware-powercli/" />
    <meta name="twitter:image" content="https://scott-bollinger.com/content/images/2019/10/IMG_5553.jpg" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="Scott Bollinger / @kfalconspb" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="Virtualization" />
    <meta name="twitter:site" content="@kfalconspb" />
    <meta name="twitter:creator" content="@kfalconspb" />
    <meta property="og:image:width" content="1110" />
    <meta property="og:image:height" content="932" />
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "Scott-Bollinger.com",
        "url": "https://scott-bollinger.com/",
        "logo": {
            "@type": "ImageObject",
            "url": "https://scott-bollinger.com/favicon.ico",
            "width": 48,
            "height": 48
        }
    },
    "author": {
        "@type": "Person",
        "name": "Scott Bollinger / @kfalconspb",
        "image": {
            "@type": "ImageObject",
            "url": "https://scott-bollinger.com/content/images/2019/10/kfalconspb.jpg",
            "width": 399,
            "height": 399
        },
        "url": "https://scott-bollinger.com/author/kfalconspb/",
        "sameAs": [
            "http://Scott-Bollinger.com",
            "https://twitter.com/kfalconspb"
        ]
    },
    "headline": "Identifing, Unmounting CDs, and Rescanning the HBAs\nwith VMware PowerCLI",
    "url": "https://scott-bollinger.com/identifing-unmounting-cds-and-rescanning-the-hbaswith-vmware-powercli/",
    "datePublished": "2014-02-09T17:00:00.000Z",
    "dateModified": "2019-10-21T09:29:46.000Z",
    "image": {
        "@type": "ImageObject",
        "url": "https://scott-bollinger.com/content/images/2019/10/IMG_5553.jpg",
        "width": 1110,
        "height": 932
    },
    "keywords": "Virtualization",
    "description": "VMotion Failing?\nThese VMware PowerCLI commands, came in handy a month or so ago. I&#x27;d thought I&#x27;d\nshare. Credit is given in the links below.\n\nWhat do you do when, you see a mounted ISO not being used? Left abandoned and\ndiscarded? Does it drive you absolutely mad? Do you go all stabby Joe? Does the\nOCD kick in and you need to find and unmount the entire world. Then the below\nmay help.\n\nIn all seriousness though, a mounted ISO will cause a VMotion to fail.\n\nDetect which VM’s have CDs mounted\nGet-",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://scott-bollinger.com/"
    }
}
    </script>

    <meta name="generator" content="Ghost 3.14" />
    <link rel="alternate" type="application/rss+xml" title="Scott-Bollinger.com" href="https://scott-bollinger.com/rss/" />
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-48318522-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-48318522-3');
</script>

    <style>#wrapper>.bg {background-image: url(/assets/images/overlay.png?v=12769605f4),linear-gradient(0deg, rgba(0,0,0,0.1), rgba(0,0,0,0.1)),url("/content/images/2019/10/asset-268-3.jpg") }</style>

</head>
<body class="is-preload post-template tag-virtualization">

    <div id="wrapper" >


        <header id="header">
                <a href="https://scott-bollinger.com" class="logo">Scott-Bollinger.com</a>
        </header>

            <nav id="nav">
    <ul class="links">
        <li class="nav-home "><a href="https://scott-bollinger.com/">Home</a></li>
        <li class="nav-disclaimer "><a href="https://scott-bollinger.com/disclaimer/">Disclaimer</a></li>
        <li class="nav-about "><a href="https://scott-bollinger.com/author/kfalconspb/">About</a></li>
    </ul>
    <ul class="icons">
        <li><a href="https://twitter.com/kfalconspb" class="icon fa-twitter" title="Twitter"><span class="label">Twitter</span></a></li>
        <li><a href="https://scott-bollinger.com/rss/" class="icon fa-rss" target="_blank" rel="noopener"><span class="label" title="RSS">RSS</span></a></li>
    </ul>
</nav>


        

<main id="main">

    <section class="post">

        <header class="major">
            <span class="date">February 9, 2014</span>
            <h1>Identifing, Unmounting CDs, and Rescanning the HBAs
with VMware PowerCLI</h1>
        </header>

        <div class="image main"><img src="/content/images/2019/10/IMG_5553.jpg" alt="Identifing, Unmounting CDs, and Rescanning the HBAs
with VMware PowerCLI" /></div>

        <div class="content">
            <h3 id="vmotion-failing"><strong>VMotion Failing?</strong></h3><p>These VMware PowerCLI commands, came in handy a month or so ago. I'd thought I'd share. Credit is given in the links below.</p><p>What do you do when, you see a mounted ISO not being used? Left abandoned and discarded? Does it drive you absolutely mad? Do you go all stabby Joe? Does the OCD kick in and you need to find and unmount the entire world. Then the below may help.</p><p>In all seriousness though, <strong><strong>a mounted ISO will cause a </strong>VM<strong>otion to fail.</strong></strong></p><h3 id="detect-which-vm-s-have-cds-mounted"><strong>Detect which VM’s have CDs mounted</strong></h3><p><code>Get-VM | Where-Object {$_ | Get-CDDrive | Where-Object { $_.ConnectionState.Connected -eq "true" } } | Select-Object Name</code></p><h2 id="detect-which-vm-s-have-cds-mounted-and-unmount-the-ones-found">Detect which VM's have CDs mounted and unmount the ones found</h2><p><code>Get-VM | Where-Object {$_ | Get-CDDrive | Where-Object { $_.ConnectionState.Connected -eq "true" } } | Get-CDDrive | Set-CDDrive -Connected $false -Confirm:$false</code></p><h3 id="rescan-hba-s-in-a-cluster"><strong>Rescan HBA’s in a cluster</strong></h3><p><code>Get-Cluster 'Cluster 1' | Get-VMHost | Get-VMHostStorage -RescanAllHba -RescanVmfs</code></p><h3 id="resources"><strong>Resources</strong></h3><ol><li><a href="https://www.simple-talk.com/sysadmin/virtualization/10-steps-to-kick-start-your-vmware-automation-with-powercli/">https://www.simple-talk.com/sysadmin/virtualization/10-steps-to-kick-start-your-vmware-automation-with-powercli/</a></li></ol>
        </div>


        <footer class="post-footer">

            <div class="authors">
                <a class="author-box" href="/author/kfalconspb/">
                    <img class="author-profile-image" src="https://scott-bollinger.com/content/images/2019/10/kfalconspb.jpg" alt="Scott Bollinger / @kfalconspb" />
                    <section class="author-box-content">
                        <div class="author-box-label">Author</div>
                        <h5 class="author-box-name">Scott Bollinger / @kfalconspb</h5>
                        <p>I&#x27;m Scott Bollinger / @kfalconspb, and have been an IT professional for over 25 years. Half that time, in a Fortune 50 financial corporation, and the other half with small/medium size businesses.</p>
                    </section>
                </a>
            </div>

        </footer>

    </section>

</main>


<script>
    var images = document.querySelectorAll('.kg-gallery-image img');
    images.forEach(function (image) {
        var container = image.closest('.kg-gallery-image');
        var width = image.attributes.width.value;
        var height = image.attributes.height.value;
        var ratio = width / height;
        container.style.flex = ratio + ' 1 0%';
    })
</script>


        <div id="copyright">
            <ul>
                <li><Scott-Bollinger.com> Copyright &copy; 2020 <a href="/author/kfalconspb/">Scott Bollinger</a> / <a href="https://twitter.com/kfalconspb" target="_blank">@kfalconspb</a></li>
            </ul>
        </div>

    </div>


    <script src="/assets/main/js/jquery.min.js?v=12769605f4"></script>
    <script src="/assets/main/js/jquery.scrollex.min.js?v=12769605f4"></script>
    <script src="/assets/main/js/jquery.scrolly.min.js?v=12769605f4"></script>
    <script src="/assets/main/js/browser.min.js?v=12769605f4"></script>
    <script src="/assets/main/js/breakpoints.min.js?v=12769605f4"></script>
    <script src="/assets/main/js/util.js?v=12769605f4"></script>
    <script src="/assets/main/js/main.js?v=12769605f4"></script>

    

</body>
</html>
